<p id="notice"><%= notice %></p>

<h1>Remédios</h1>

<%= link_to 'Voltar', root_path %>

<%= search_form_for @q, html: { class: '' } do |f| %>
  <%= f.input :name_cont, label: false, placeholder: 'Nome' %>
  <%= f.input :categories_medicine_categories_category_name_cont, label: false, placeholder: 'Categoria' %>
  <%= f.button :submit, 'Buscar', name: '', class: 'btn btn-warning'%>
<% end %>

<br />

<% if @medicines.any? %>
  <table>
    <thead>
      <tr>
        <th>Nome</th>
        <th>Quantidade</th>
        <th>Validade</th>
        <th>Data de compra</th>
        <th>Categoria</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @medicines.each do |medicine| %>
        <tr>
          <td><%= medicine.name %></td>
          <td><%= medicine.quantity %></td>
          <td><%= medicine.medicine_validity.strftime("%d/%m/%Y") %></td>
          <td><%= medicine.purchase_date.strftime("%d/%m/%Y") %></td>
          <td>
            <% medicine.categories.each do |c| %>
              <span class="badge bg-info">
                <%= c.name %>
              </span>
            <% end %>
          </td>
          <td>
            <%= link_to medicine do %>
              <i class="fas fa-search"></i>
            <% end %>
          </td>
          <td>
            <%= link_to edit_medicine_path(medicine) do %>
              <i class="fas fa-edit"></i>
            <% end %>
          </td>
          <td>
            <%= link_to medicine, method: :delete, data: { confirm: 'Are you sure?' } do %>
              <i class="fas fa-times-circle red"></i>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  Não há remédio cadastrado.
<% end %>
<br>

<%= link_to new_medicine_path, class: "btn btn-green" do %>
  Novo Remédio
<% end %>
